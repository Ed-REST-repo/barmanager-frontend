<div class="container">
  <div class="header">
    <h1>üçπ Cat√°logo de Cocteles</h1>
  </div>

  <!-- filtro dificultad -->
  <div class="filtros-container">
    <div 
      class="filtro-chip facil"
      [class.activo]="esDificultadActiva('Facil')"
      (click)="filtrarPorDificultad('Facil')">
      Facil
    </div>
    <div 
      class="filtro-chip media"
      [class.activo]="esDificultadActiva('Media')"
      (click)="filtrarPorDificultad('Media')">
      Media
    </div>
    <div 
      class="filtro-chip dificil"
      [class.activo]="esDificultadActiva('Dificil')"
      (click)="filtrarPorDificultad('Dificil')">
      Dificil
    </div>
    <div 
      class="filtro-chip experto"
      [class.activo]="esDificultadActiva('Experto')"
      (click)="filtrarPorDificultad('Experto')">
      üî• Experto
    </div>
  </div>

  <div *ngIf="loading" class="loading">
    <mat-spinner></mat-spinner>
  </div>

  <!-- no hay resultados -->
  <div *ngIf="!loading && coctelesFiltrados.length === 0" class="sin-resultados">
    <mat-icon>search_off</mat-icon>
    <h3>No hay cocteles con esta dificultad</h3>
    <p>Intenta otro filtro</p>
  </div>

  <div *ngIf="!loading && coctelesFiltrados.length > 0" class="grid">
    <mat-card *ngFor="let coctel of coctelesFiltrados" class="coctel-card" 
              (click)="verDetalle(coctel.coctelId)">
      
      <div *ngIf="coctel.dificultad" 
           class="dificultad-badge"
           [ngClass]="getDificultadClass(coctel.dificultad)">
        {{ coctel.dificultad }}
      </div>
      
      <div class="card-icon">üç∏</div>
      
      <mat-card-header>
        <mat-card-title>{{ coctel.nombreCoctel }}</mat-card-title>
        <mat-card-subtitle>{{ coctel.categoria }}</mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <p>{{ coctel.descripcion }}</p>
        
        <div class="disponibilidad">
          <mat-chip [class]="getEstadoClass(coctel.estado)">
            {{ coctel.porcentajeDisponibilidad | number:'1.0-0' }}% disponible
          </mat-chip>
        </div>

        <div class="ingredientes">
          <span>{{ coctel.ingredientesDisponibles }}/{{ coctel.ingredientesTotales }} ingredientes</span>
        </div>

        <div *ngIf="coctel.tieneSustituciones" class="sustituciones">
          <mat-icon>auto_fix_high</mat-icon>
          <span>Con sustituciones</span>
        </div>
      </mat-card-content>

      <mat-card-actions>
        <button mat-raised-button color="primary">
          Ver Receta
        </button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
